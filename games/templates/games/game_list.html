{% extends 'games/base.html' %}
{% load i18n %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>{% trans "My Games" %}</h1>
    {% if user.is_authenticated %}
    <a href="{% url 'game-create' %}" class="btn btn-primary">
        <i class="bi bi-plus-lg"></i> {% trans "Add New Game" %}
    </a>
    {% endif %}
</div>

{% if games %}
<div class="table-responsive">
    <table class="table table-hover">
        <thead class="table-dark">
            <tr>
                <th>{% trans "Title" %}</th>
                <th>{% trans "Platform" %}</th>
                <th>{% trans "Genre" %}</th>
                <th>{% trans "Release Date" %}</th>
                <th>{% trans "Publisher" %}</th>
                <th>{% trans "Status" %}</th>
                <th>{% trans "Rating" %}</th>
                {% if user.is_authenticated %}
                <th>{% trans "Actions" %}</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for game in games %}
            <tr>
                <td>{{ game.title }}</td>
                <td>{{ game.get_platform_display }}</td>
                <td>{{ game.genre }}</td>
                <td>{{ game.release_date|default:"-" }}</td>
                <td>{{ game.publisher }}</td>
                <td>
                    {% if game.completed %}
                    <span class="badge bg-success">{% trans "Completed" %}</span>
                    {% else %}
                    <span class="badge bg-warning">{% trans "In Progress" %}</span>
                    {% endif %}
                </td>
                <td>
                    {% if game.rating %}
                    <span class="text-warning">
                        {% for i in "12345"|make_list %}
                        {% if forloop.counter <= game.rating %}
                        <i class="bi bi-star-fill"></i>
                        {% else %}
                        <i class="bi bi-star"></i>
                        {% endif %}
                        {% endfor %}
                    </span>
                    {% else %}
                    -
                    {% endif %}
                </td>
                {% if user.is_authenticated %}
                <td>
                    <div class="btn-group">
                        <a href="{% url 'game-update' game.pk %}" class="btn btn-sm btn-outline-primary" title="{% trans 'Edit' %}">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a href="{% url 'game-delete' game.pk %}" class="btn btn-sm btn-outline-danger" title="{% trans 'Delete' %}">
                            <i class="bi bi-trash"></i>
                        </a>
                    </div>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    {% trans "No games in your collection yet." %}
    {% if user.is_authenticated %}
    <a href="{% url 'game-create' %}">{% trans "Add your first game!" %}</a>
    {% endif %}
</div>
{% endif %}
{% endblock %} 